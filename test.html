<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PUSLAT KODIKLATAU - Intelligence Database</title>
<style>
body {
    font-family: 'Courier New', monospace;
    background-color: black;
    color: #00FF00;
    margin: 0;
    display: flex;
    flex-direction: column;
    height: 100vh;
}
header {
    background-color: black;
    color: #00FF00;
    padding: 20px 0 10px 0;
    text-align: center;
    line-height: 1.1;
    border-bottom: 1px solid #00FF00;
}
.text {
    font-size: 75px;
    margin-bottom: 0;
}
.text1 {
    font-size: 30px;
    margin-top: 0;
    animation: blinkText 1s infinite;
}

.header-buttons {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 15px;
}
.header-buttons button {
    background: transparent;
    border: 1px solid #00FF00;
    color: #00FF00;
    padding: 8px 15px;
    cursor: pointer;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    transition: background 0.3s, color 0.3s;
}
.header-buttons button:hover {
    background-color: #00FF00;
    color: black;
}

.main-container {
    display: flex;
    flex: 1;
    border-top: 1px solid #00FF00;
}
.search-panel {
    width: 35%;
    padding: 20px;
    display: flex;
    flex-direction: column;
    border-right: 2px solid #00FF00;
}
.search-panel h2 { text-align: center; margin-bottom: 20px; }
input {
    background: transparent;
    border: 1px solid #00FF00;
    color: #00FF00;
    padding: 10px;
    margin-bottom: 15px;
    font-size: 16px;
    border-radius: 4px;
    outline: none;
}
.info-text { font-size: 14px; text-align: center; margin-top: 10px; }
#member-buttons {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
    margin-top: 10px;
}
.output-panel {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    border-left: 2px solid #00FF00;
}
.agent-profile {
    display: flex;
    gap: 20px;
    align-items: flex-start;
    flex-wrap: wrap;
}
.agent-profile pre {
    flex: 1;
    white-space: pre-wrap;
    line-height: 1.4;
}
.agent-profile img {
    width: 135px;
    height: 185px;
    object-fit: cover;
    border: 2px solid #00FF00;
    border-radius: 8px;
    display: none;
    opacity: 0;
    transition: opacity 0.6s ease-in-out;
}
.doc-buttons {
    display: flex;
    gap: 10px;
    margin-top: 15px;
}
.not-found { color: #FF0000; font-weight: bold; }
.agent-profile button,
#member-buttons button,
.doc-buttons button {
    background: transparent;
    border: 1px solid #00FF00;
    color: #00FF00;
    padding: 8px 12px;
    cursor: pointer;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    transition: background 0.3s, color 0.3s;
}
.agent-profile button:hover,
#member-buttons button:hover,
.doc-buttons button:hover {
    background-color: #00FF00;
    color: black;
}
@media (max-width: 768px) {
    .main-container { flex-direction: column; }
    .search-panel, .output-panel { width: 100%; border: none; border-bottom: 1px solid #00FF00; }
    .agent-profile { flex-direction: column; align-items: center; }
}
.agent-profile pre::after {
    content: "_";
    animation: blink 1s infinite;
}
@keyframes blinkText {
    0%, 50%, 100% { opacity: 1; }
    25%, 75% { opacity: 0; }
}
</style>
</head>
<body>
<header>
    <h1 class="text">PUSLAT KODIKLATAU</h1>
    <h1 class="text1">DATABASE TERMINAL</h1>

    <div class="header-buttons">
        <button onclick="goTo('https://kodiklatau.tni-au.mil.id/struktur-organisasi')">STRUKTUR ORGANISASI</button>
        <button onclick="goTo('https://kodiklatau.tni-au.mil.id/radiogram')">RADIOGRAM</button>
        <button onclick="goTo('https://kodiklatau.tni-au.mil.id/jab-kosong')">JAB KOSONG</button>
        <button onclick="goTo('https://kodiklatau.tni-au.mil.id/juknis')">JUKNIS</button>
        <button onclick="goTo('https://kodiklatau.tni-au.mil.id/orgas-puslat')">ORGAS PUSLAT</button>
    </div>
</header>

<div class="main-container">
    <div class="search-panel">
        <h2>üîç Data Lookup</h2>
        <label for="search">Masukkan Keyword Unit / Nama Lengkap:</label>
        <input type="text" id="search" placeholder="">
        <p class="info-text">Type the keyword then press ENTER to display the member list</p>
        <div id="member-buttons"></div>
    </div>

    <div class="output-panel" id="output">
        <div class="agent-profile" id="agent-container">
            <pre id="agent-dossier">
Biodata will appear after clicking the member button
            </pre>
            <img id="agent-photo" src="" alt="Foto Personel">
        </div>
    </div>
</div>

<script>
function goTo(url) { window.location.href = url; }

const personnelDB = [
    { 
        nama_lengkap: "Endriady, S.H", 
        pangkat: "Letkol Adm", 
        nrp_nip: "522726", 
        jabatan: "Kadispers", 
        korp_fung_spes: "Adm Personel", 
        tanggal_lahir: "1980-03-10", 
        tempat_lahir: "Subang", 
        agama: "Islam", 
        satker: "DISPERS", 
        specialization: "9-S/VIIIA/III/2025", 
        ops_completed: "18/07/2025", 
        photo: "kadispers new.jpg",
        documents: [
            { label: "Pemuktahiran Data", url: "https://example.com/endriady-data-update" },
            { label: "Riwayat Hidup", url: "https://example.com/endriady-riwayat" },
            { label: "KU-1", url: "https://example.com/endriady-ku1" }
        ]
    },
    { 
        nama_lengkap: "Andi Darmawan, S.E", 
        pangkat: "Penata Tk.I IIId", 
        nrp_nip: "197905032009121002", 
        jabatan: "Tur Adminpers Dispers", 
        korp_fung_spes: "Adm Keuangan", 
        tanggal_lahir: "03/05/1979", 
        tempat_lahir: "Subang", 
        agama: "Islam", 
        satker: "DISPERS", 
        specialization: "9-S/VIIIA/III/2025", 
        ops_completed: "21/03/2025", 
        photo: "https://i.pravatar.cc/150?img=15",
        documents: [
            { label: "Pemuktahiran Data", url: "https://example.com/andi-data-update" },
            { label: "Riwayat Hidup", url: "https://example.com/andi-riwayat" },
            { label: "KU-1", url: "https://example.com/andi-ku1" }
        ]
    },
    { 
        nama_lengkap: "Fata Patria", 
        pangkat: "Marsekal Pertama TNI", 
        nrp_nip: "4215896", 
        jabatan: "Danpuslat Kodiklatau", 
        korp_fung_spes: "PNB", 
        tanggal_lahir: "30/11/1982", 
        tempat_lahir: "Banjarmasin", 
        agama: "Islam", 
        satker: "DISPERS", 
        specialization: "Recon Ops", 
        ops_completed: "15/08/2025", 
        photo: "danpus pdh.jpg",
        documents: [
            { label: "Pemuktahiran Data", url: "https://example.com/fata-data-update" },
            { label: "Riwayat Hidup", url: "https://example.com/fata-riwayat" },
            { label: "KU-1", url: "https://example.com/fata-ku1" }
        ]
    },
    { 
        nama_lengkap: "Muhammad Muslih", 
        pangkat: "Penata Tk.I IIId", 
        nrp_nip: "154267", 
        jabatan: "Analis Data", 
        korp_fung_spes: "Adm", 
        tanggal_lahir: "24/10/1988", 
        tempat_lahir: "Solo", 
        agama: "Islam", 
        satker: "DISPERS", 
        specialization: "Tactical Planning", 
        ops_completed: "24/06/2025", 
        photo: "LETKOL mUSLIH.jpg",
        documents: [
            { label: "Pemuktahiran Data", url: "https://example.com/muslih-data-update" },
            { label: "Riwayat Hidup", url: "https://example.com/muslih-riwayat" },
            { label: "KU-1", url: "https://example.com/muslih-ku1" }
        ]
    }
];

const searchInput = document.getElementById("search");
const dossierEl = document.getElementById("agent-dossier");
const photoEl = document.getElementById("agent-photo");
const memberBtnContainer = document.getElementById("member-buttons");
const agentContainer = document.getElementById("agent-container");
const outputPanel = document.getElementById("output");

function getMonthsDiff(startDateStr) {
    if (!startDateStr) return "-";
    const [day, month, year] = startDateStr.split("/").map(Number);
    if (!day || !month || !year) return "-";
    const startDate = new Date(year, month - 1, day);
    const now = new Date();
    let months = (now.getFullYear() - startDate.getFullYear()) * 12 + (now.getMonth() - startDate.getMonth());
    if (now.getDate() < startDate.getDate()) months--;
    return months;
}

function displayAgent(agent) {
    dossierEl.textContent = `Nama Lengkap  : ${agent.nama_lengkap}
Pangkat       : ${agent.pangkat}
NRP / NIP     : ${agent.nrp_nip}
Jabatan       : ${agent.jabatan}
Korp/Fung/Spes: ${agent.korp_fung_spes}
Tempat/Tgl Lahir : ${agent.tempat_lahir}, ${agent.tanggal_lahir}
Agama         : ${agent.agama}
Satker        : ${agent.satker}
Specialization: ${agent.specialization || "-"}
Ops Completed : ${agent.ops_completed || "-"}
Ops Duration (months) : ${getMonthsDiff(agent.ops_completed)}`;

    if(agent.photo){
        photoEl.src = agent.photo;
        photoEl.style.display = "block";
        setTimeout(() => { photoEl.style.opacity = 1; }, 50);
    } else {
        photoEl.style.display = "none";
    }

    // Hapus tombol sebelumnya
    let existingDocBtns = agentContainer.querySelector(".doc-buttons");
    if(existingDocBtns) existingDocBtns.remove();

    if(agent.documents && agent.documents.length){
        const docContainer = document.createElement("div");
        docContainer.className = "doc-buttons";
        agent.documents.forEach(d => {
            const btn = document.createElement("button");
            btn.textContent = d.label;
            btn.onclick = ()=> window.open(d.url, "_blank");
            docContainer.appendChild(btn);
        });
        agentContainer.appendChild(docContainer);
    }
}

function searchPersonnel(keyword){
    memberBtnContainer.innerHTML = "";
    const results = personnelDB.filter(agent => 
        agent.nama_lengkap.toLowerCase().includes(keyword.toLowerCase()) ||
        agent.satker.toLowerCase().includes(keyword.toLowerCase())
    );
    if(results.length === 0){
        memberBtnContainer.innerHTML = "<p class='not-found'>No members found</p>";
        return;
    }
    results.forEach(agent => {
        const btn = document.createElement("button");
        btn.textContent = agent.nama_lengkap;
        btn.onclick = () => displayAgent(agent);
        memberBtnContainer.appendChild(btn);
    });
}

searchInput.addEventListener("keydown", e => {
    if(e.key === "Enter"){
        searchPersonnel(searchInput.value.trim());
    }
});
</script>
</body>
</html>
